class PostComments{constructor(e){this.postId=e,this.postContainer=$(`#post-${e}`),this.newCommentForm=$(`#post-${e}-comments-form`),this.createComment(),this.postContainer.on("click",".delete-comment-button",(e=>{e.preventDefault(),this.deleteComment($(e.currentTarget))}))}createComment(){this.newCommentForm.submit((e=>{e.preventDefault();const t=this;$.ajax({type:"post",url:"/comments/create",data:t.newCommentForm.serialize(),success:e=>{let o=t.newCommentDom(e.data.comment);$(`#post-comments-${t.postId}`).prepend(o),new ToggleLike($(" .toggle-like-button",o)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"topRight",timeout:1500}).show()},error:e=>{console.error(e.responseText),new Noty({theme:"relax",text:"Error publishing comment!",type:"error",layout:"topRight",timeout:1500}).show()}})}))}newCommentDom(e){return $(`<li id="comment-${e._id}">\n            <p>\n                \n                <small>\n                    <a class="delete-comment-button" href="/comments/destroy/${e._id}">X</a>\n                </small>\n                \n                ${e.content}\n                <br>\n                <small>\n                    ${e.user.name}\n                </small>\n                <small>\n                \n                    <a class="toggle-like-button" data-likes="0" href="/likes/toggle/?id=${e._id}&type=Comment">\n                        0 Likes\n                    </a>\n                \n                </small>\n\n            </p>    \n\n    </li>`)}deleteComment(e){$.ajax({type:"get",url:e.prop("href"),success:e=>{$(`#comment-${e.data.comment_id}`).remove(),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:e=>{console.error(e.responseText),new Noty({theme:"relax",text:"Error deleting comment!",type:"error",layout:"topRight",timeout:1500}).show()}})}}